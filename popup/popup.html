<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CP Progress Tracker</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div id="app">
    <!-- Header -->
    <header class="header">
      <h1 class="title">CP Progress Tracker</h1>
      <div class="header-actions">
        <button id="syncBtn" class="icon-btn" title="Sync Data">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/>
          </svg>
        </button>
        <button id="settingsBtn" class="icon-btn" title="Settings">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="3"/>
            <path d="M12 1v6m0 6v6m-7-7h6m6 0h6"/>
          </svg>
        </button>
        <button id="themeToggle" class="icon-btn" title="Toggle Theme">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="5"/>
            <path d="M12 1v2m0 18v2M4.22 4.22l1.42 1.42m12.72 12.72l1.42 1.42M1 12h2m18 0h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
          </svg>
        </button>
      </div>
    </header>

    <!-- Navigation Tabs -->
    <nav class="tabs">
      <button class="tab active" data-view="dashboard">Dashboard</button>
      <button class="tab" data-view="comparison">Compare</button>
      <button class="tab" data-view="analytics">Analytics</button>
      <button class="tab" data-view="goals">Goals</button>
    </nav>

    <!-- Main Content Area -->
    <main id="content">
      <!-- Dashboard View -->
      <div id="dashboard-view" class="view active">
        <!-- Sync Status -->
        <div id="syncStatus" class="sync-status hidden">
          <span class="status-text">Syncing...</span>
          <div class="spinner"></div>
        </div>

        <!-- Last Sync Info -->
        <div id="lastSyncInfo" class="last-sync">
          <span id="lastSyncText">Never synced</span>
        </div>

        <!-- Quick Stats -->
        <section class="quick-stats">
          <h2 class="section-title">ğŸ† Quick Stats</h2>
          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-value" id="totalProblems">0</div>
              <div class="stat-label">Total Problems</div>
              <div class="stat-change" id="problemsChange">+0 this month</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="avgRating">0</div>
              <div class="stat-label">Avg Rating</div>
              <div class="stat-change" id="ratingChange">+0 this month</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="currentStreak">0</div>
              <div class="stat-label">Active Streak</div>
              <div class="stat-sublabel">days</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="platformsActive">0/10</div>
              <div class="stat-label">Platforms</div>
              <div class="stat-sublabel">active</div>
            </div>
          </div>
        </section>

        <!-- Weekly Progress -->
        <section class="weekly-progress">
          <h2 class="section-title">ğŸ“ˆ This Week</h2>
          <div class="progress-bar">
            <div class="progress-fill" id="weekProgress" style="width: 0%"></div>
          </div>
          <div class="week-calendar" id="weekCalendar">
            <!-- Generated by JS -->
          </div>
        </section>

        <!-- Platform Overview -->
        <section class="platform-overview">
          <h2 class="section-title">ğŸŒ Platforms</h2>
          <div id="platformsList" class="platforms-list">
            <div class="empty-state">
              <p>ğŸ‘‹ Welcome! Configure your usernames in settings to get started.</p>
              <button id="goToSettings" class="btn btn-primary">Configure Usernames</button>
            </div>
          </div>
        </section>

        <!-- Recommendations -->
        <section class="recommendations">
          <h2 class="section-title">ğŸ¯ Recommendations</h2>
          <div id="recommendationsList" class="recommendations-list">
            <div class="empty-state">
              <p>Complete your first sync to get personalized recommendations!</p>
            </div>
          </div>
        </section>
      </div>

      <!-- Comparison View -->
      <div id="comparison-view" class="view">
        <section class="comparison-section">
          <h2 class="section-title">ğŸ“Š Compare Progress</h2>
          
          <div class="comparison-controls">
            <label>
              <span>Compare:</span>
              <select id="comparisonType">
                <option value="7d">Last 7 days</option>
                <option value="30d" selected>Last 30 days</option>
                <option value="90d">Last 90 days</option>
                <option value="365d">Last year</option>
              </select>
            </label>
          </div>

          <div id="comparisonResults" class="comparison-results">
            <div class="empty-state">
              <p>Select a comparison period and sync your data to see results</p>
            </div>
          </div>
        </section>

        <!-- Platform Comparison -->
        <section class="platform-comparison">
          <h2 class="section-title">ğŸ”€ Platform Comparison</h2>
          <div id="platformComparisonTable"></div>
        </section>
      </div>

      <!-- Analytics View -->
      <div id="analytics-view" class="view">
        <section class="analytics-section">
          <h2 class="section-title">ğŸ“ˆ Detailed Analytics</h2>
          
          <!-- Rating Progression -->
          <div class="analytics-card">
            <h3>Rating History</h3>
            <div id="ratingChart" class="chart-container">
              <div class="empty-state">Sync data to see rating progression</div>
            </div>
          </div>

          <!-- Category Mastery -->
          <div class="analytics-card">
            <h3>Category Mastery</h3>
            <div id="categoryMastery" class="category-list">
              <div class="empty-state">Sync data to see category breakdown</div>
            </div>
          </div>

          <!-- Time Analysis -->
          <div class="analytics-card">
            <h3>Activity Patterns</h3>
            <div id="timeAnalysis">
              <div class="empty-state">Sync data to see activity patterns</div>
            </div>
          </div>
        </section>
      </div>

      <!-- Goals View -->
      <div id="goals-view" class="view">
        <section class="section">
          <div class="section-header">
            <h2>Your Goals</h2>
            <button id="addGoalBtn" class="btn btn-primary">+ New Goal</button>
          </div>

          <div id="goalsList" class="goals-list">
            <div class="empty-state">No goals yet. Create your first goal!</div>
          </div>
        </section>

        <section class="section">
          <h2>Achievements</h2>
          <div id="achievementsList" class="achievements-grid">
            <div class="empty-state">Sync data to unlock achievements</div>
          </div>
        </section>
      </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
      <div class="footer-links">
        <a href="#" id="openOptions">Settings</a>
        <span class="separator">â€¢</span>
        <a href="https://github.com" target="_blank">GitHub</a>
        <span class="separator">â€¢</span>
        <span class="version">v1.0.0</span>
      </div>
    </footer>
  </div>

  <script type="module" src="popup.js"></script>
</body>
</html>
